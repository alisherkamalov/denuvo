{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/vboxuser/denuvo/src/app/components/notification/notification.tsx"],"sourcesContent":["import React from \"react\";\nimport \"./styles.css\"\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { RootState, setActive } from \"@/app/store\";\ninterface NotificationProps {\n    notification: string\n}\n\nconst Notification: React.FC<NotificationProps> = ({notification}) => {\n    const activeId = useSelector((state: RootState) => state.active.activeId);\n    const dispatch = useDispatch();\n    return(\n        <div  className={`notification transition-all absolute top-5 ml-auto mr-auto max-w-[90%] p-2 pl-3 pr-3 flex justify-center text-center items-center rounded-4xl border border-[#8aa9d6] ${activeId === \"notification\" ? \"active\" : \"\"}`}>\n            <div className=\"spinlogo\"></div>\n            {notification}\n        </div>\n    )\n}\n\nexport default Notification;"],"names":[],"mappings":";;;;AAEA;;;;;AAMA,MAAM,eAA4C,CAAC,EAAC,YAAY,EAAC;;IAC7D,MAAM,WAAW,CAAA,GAAA,4JAAA,CAAA,cAAW,AAAD;8CAAE,CAAC,QAAqB,MAAM,MAAM,CAAC,QAAQ;;IACxE,MAAM,WAAW,CAAA,GAAA,4JAAA,CAAA,cAAW,AAAD;IAC3B,qBACI,6LAAC;QAAK,WAAW,CAAC,sKAAsK,EAAE,aAAa,iBAAiB,WAAW,IAAI;;0BACnO,6LAAC;gBAAI,WAAU;;;;;;YACd;;;;;;;AAGb;GATM;;QACe,4JAAA,CAAA,cAAW;QACX,4JAAA,CAAA,cAAW;;;KAF1B;uCAWS","debugId":null}},
    {"offset": {"line": 59, "column": 0}, "map": {"version":3,"sources":["file:///home/vboxuser/denuvo/src/app/login/page.tsx"],"sourcesContent":["\"use client\";\nimport \"./styles.css\";\nimport '@ant-design/v5-patch-for-react-19';\nimport { TextField } from \"@mui/material\";\nimport { Button } from \"antd\";\nimport { useRouter } from 'next/navigation';\nimport Notification from \"../components/notification/notification\";\nimport { useDispatch } from \"react-redux\";\nimport { setActive } from \"../store\";\nimport FingerprintJS from \"@fingerprintjs/fingerprintjs\";\nimport axios from \"axios\";\nimport React, { useState, useEffect } from 'react';\n\nconst LoginPage: React.FC = () => {\n    const [loading, setLoading] = useState(false);\n    const [form, setForm] = useState({ link: '', password: '' });\n    const [error, setError] = useState(\"\");\n    const [notification, setNotification] = useState<string>(\"\");\n    const [errors, setErrors] = useState({ link: false, password: false });\n    const router = useRouter();\n    const dispatch = useDispatch();\n    const getFingerprint = async () => {\n            const fp = await FingerprintJS.load();\n            const result = await fp.get();\n          \n            return result.visitorId;\n          }\n    \n    const handleChange = (field: string) => (event: React.ChangeEvent<HTMLInputElement>) => {\n        setForm({ ...form, [field]: event.target.value });\n        setErrors({ ...errors, [field]: false });\n    };\n    const handleSubmit = async () => {\n        const newErrors = {\n            link: !form.link.trim(),\n            password: !form.password.trim(),\n        };\n        setErrors(newErrors);\n\n        if (!Object.values(newErrors).includes(true)) {\n            setLoading(true);\n            await handleAuthorization();\n            setLoading(false);\n        }\n    };\n\n    const handleAuthorization = async () => {\n        setError(\"\");\n        setNotification(\"\");\n        const ipres = await fetch('https://api64.ipify.org?format=json');\n        const data = await ipres.json();\n        const fingerprint = await getFingerprint();\n        try {\n            const response = await axios.post(`${process.env.NEXT_PUBLIC_BACKEND_URL_DEV}/login`, {\n                link: form.link.replace(/@\\s?/, \"\"),\n                password: form.password,\n                fingerprint: fingerprint,\n                ip: data.ip\n            });\n            setNotification(response.data.message);\n            window.localStorage.setItem(\"ip\", response.data.ip);\n            window.localStorage.setItem(\"fingerprint\", response.data.fingerprint);\n            window.localStorage.setItem(\"token\", response.data.token);\n            console.log(response.data.ip, response.data.token, response.data.fingerprint)\n    \n            dispatch(setActive(\"notification\"));\n            setTimeout(() => { \n                dispatch(setActive(null));\n                router.push(\"/\");\n            }, 2000);\n        }\n        catch(e: any) {\n            setNotification(e.response?.data?.message || e.message || \"Произошла ошибка\");\n            dispatch(setActive(\"notification\"));\n        }\n    };\n\n\n    return (\n        <div className=\"main flex flex-col w-full h-dvh justify-center items-center\">\n            <Notification notification={notification} />\n            <div className=\"logo w-80 h-80\"></div>\n            <div className=\"container z-1 -translate-y-15 gap-3 flex flex-col w-81 border border-[#8aa9d6] h-60 rounded-xl overflow-hidden\">\n                <div className=\"header w-full h-15 bg-[#8aa9d6] flex justify-center items-center\">\n                    Авторизация\n                </div>\n                <div className=\"content w-full flex flex-col gap-5 pl-3 pr-3\">\n                    <TextField\n                        size=\"small\"\n                        label=\"@Уникальное имя\"\n                        variant=\"outlined\"\n                        className=\"textfield\"\n                        error={errors.link}\n                        helperText={errors.link ? 'Заполните поле' : ''}\n                        onChange={handleChange('link')}\n                    />\n                    <TextField\n                        size=\"small\"\n                        label=\"Пароль\"\n                        type=\"password\"\n                        variant=\"outlined\"\n                        className=\"textfield\"\n                        error={errors.password}\n                        helperText={errors.password ? 'Заполните поле' : ''}\n                        onChange={handleChange('password')}\n                    />\n                    <Button\n                        type=\"primary\"\n                        loading={loading}\n                        onClick={handleSubmit}\n                        disabled={Object.values(errors).includes(true) || Object.values(form).some(val => !val.trim())}\n                    >\n                        Авторизоваться\n                    </Button>\n                </div>\n            </div>\n            <Button type=\"text\" className=\"btn-route -translate-y-12\" onClick={() => { router.push('/register') }}>Еще нет аккаунта? Зарегистрироваться</Button>\n        </div>\n    );\n};\n\nexport default LoginPage;\n"],"names":[],"mappings":"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","debugId":null}}]
}